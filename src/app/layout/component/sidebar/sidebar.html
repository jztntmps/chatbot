<aside class="sidebar" [class.sidebar--closed]="!isOpen">

  <!-- HEADER -->
  <div class="sidebar-header">
    <div class="sidebar__top">
      <button
        class="burger"
        type="button"
        (click)="toggle.emit()"
        aria-label="Toggle sidebar"
      >
        â˜°
      </button>
    </div>

    <div class="profile">
      <div class="avatar">
        <img *ngIf="avatarUrl; else fallback" [src]="avatarUrl" alt="Avatar" />
        <ng-template #fallback>
          <div class="avatar__fallback">ğŸ‘¤</div>
        </ng-template>
      </div>
    </div>

    <button class="newchat" type="button" (click)="settingsOpen = false; newChat.emit()">
      <span class="newchat__plus">ï¼‹</span>
      <span class="newchat__text">New Chat</span>
    </button>
  </div>

  <!-- BODY (SCROLLABLE) -->
  <div class="sidebar-body">
    <div class="list">

        <button
        class="item"
        type="button"
        *ngFor="let c of (showAll ? chats : (chats | slice:0:3)); trackBy: trackById"
        (click)="settingsOpen = false; openChat.emit(c.id)"
        >
        <span class="item__title">{{ c.title }}</span>
        <span class="item__dots">â‹¯</span>
        </button>

        <button
        class="seeall"
        type="button"
        *ngIf="chats.length > 3"
        (click)="toggleSeeAll()"
        >
        {{ showAll ? 'Show Less' : 'See All' }}
        </button>


    </div>
  </div>

  <!-- FOOTER -->
  <div class="sidebar-footer">
    <button class="settings" type="button" (click)="toggleSettings()">
      <span class="settings__icon">âš™</span>
      <span class="settings__text">Settings</span>
    </button>

    <div class="settings-menu" *ngIf="settingsOpen">
      <button class="settings-menu__item" type="button" (click)="clickArchive()">
        ğŸ“ <span>Archive</span>
      </button>

      <button
        class="settings-menu__item settings-menu__item--danger"
        type="button"
        (click)="clickLogout()"
      >
        ğŸšª <span>Logout</span>
      </button>
    </div>
  </div>

</aside>
