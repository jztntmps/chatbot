<main class="login">
  <div class="login__container">

    <!-- LEFT SIDE -->
    <div class="login__left">
      <div class="robot">
        <img
          src="/assets/mini_bot.png"
          alt="Mini Bot"
          class="robot__body"
        />
        <img
          src="/assets/mini_arm.png"
          alt="Mini Arm"
          class="robot__right"
        />
      </div>
    </div>

    <!-- RIGHT SIDE -->
    <div class="login__right">
      <h1 class="login__title">Welcome Back</h1>

      <div class="login__form-card">
        <form class="login__form" (ngSubmit)="login()" autocomplete="off">

        <!-- EMAIL -->
        <div class="field">
          <span class="field__icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="1.6" />
              <path d="M4 6.5 12 12l8-5.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>

          <input
            type="email"
            name="email"
            [(ngModel)]="email"
            (ngModelChange)="clearError()"
            placeholder="Email"
            class="field__input"
            required
          />
        </div>

        <!-- PASSWORD -->
        <div class="field">
          <span class="field__icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <rect x="4" y="10" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.6"/>
              <path d="M8 10V7a4 4 0 1 1 8 0v3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 14v3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <circle cx="12" cy="13.2" r="0.6" fill="currentColor"/>
            </svg>
          </span>

          <input
            [type]="showPassword ? 'text' : 'password'"
            name="password"
            [(ngModel)]="password"
            (ngModelChange)="clearError()"
            placeholder="Password"
            class="field__input"
            required
          />

        <button
          type="button"
          class="field__eye"
          (click)="togglePassword()"
        >
            <ng-container *ngIf="showPassword; else eyeClosed">
              <img src="/assets/visible.png" alt="Hide password" width="18" height="18" />
            </ng-container>
            <ng-template #eyeClosed>
              <img src="/assets/eye.png" alt="Show password" width="18" height="18" />
            </ng-template>
        </button>
        </div>

        <!-- ERROR MESSAGE -->
        <p class="login__error" *ngIf="errorMsg">
          {{ errorMsg }}
        </p>

        <button type="submit" class="btn btn--signup" [disabled]="loading">
          {{ loading ? 'Logging in...' : 'Login' }}
        </button>

        <p class="login__signup">
          Donâ€™t have an account?
          <a routerLink="/signup">Sign Up</a>
        </p>

        </form>
      </div>
    </div>

  </div>
</main>

<!-- Error Modal -->
<div class="modal" *ngIf="showErrorModal">
  <div class="modal__backdrop" (click)="closeErrorModal()"></div>
  <div class="modal__card" role="alertdialog" aria-live="assertive">
    <p class="modal__text">{{ errorModalMessage }}</p>
    <button class="modal__btn" type="button" (click)="closeErrorModal()">Close</button>
  </div>
</div>
